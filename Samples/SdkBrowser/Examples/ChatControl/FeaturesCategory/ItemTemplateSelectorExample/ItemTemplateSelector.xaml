<?xml version="1.0" encoding="utf-8" ?>
<telerik:RadContentView xmlns="http://schemas.microsoft.com/dotnet/2021/maui"
             xmlns:x="http://schemas.microsoft.com/winfx/2009/xaml"
             xmlns:telerik="http://schemas.telerik.com/2022/xaml/maui"
             xmlns:local="clr-namespace:SDKBrowserMaui.Examples.ChatControl.FeaturesCategory.ItemTemplateSelectorExample"
             x:Class="SDKBrowserMaui.Examples.ChatControl.FeaturesCategory.ItemTemplateSelectorExample.ItemTemplateSelector">
    <telerik:RadContentView.Resources>
        <!-- >> chat-features-itemtemplate-resources -->
        <ResourceDictionary>
            <local:SimpleChatItemConverter x:Key="SimpleChatItemConverter" />

            <Style x:Key="MessageImageStyle" TargetType="Image">
                <Setter Property="Source" Value="{Binding Author.Avatar}" />
                <Setter Property="WidthRequest" Value="30" />
                <Setter Property="HeightRequest" Value="30" />
            </Style>

            <Style x:Key="IncomingMessageImageStyle" TargetType="Image" BasedOn="{StaticResource MessageImageStyle}">
                <Setter Property="HorizontalOptions" Value="Start" />
                <Setter Property="Margin" Value="10, 0, 0, 0" />
            </Style>

            <DataTemplate x:Key="ImportantMessageTemplate">
                <Grid Margin="0, 2, 0, 10">
                    <Image Style="{StaticResource IncomingMessageImageStyle}" />
                    <telerik:RadBorder CornerRadius="0, 7, 7, 7"
                                       Margin="45, 0, 50, 0"
                                       HorizontalOptions="Start"
                                       BackgroundColor="#FF0000">
                        <StackLayout Orientation="Horizontal" Margin="20, 0, 20, 0">
                            <Label Text="! " FontAttributes="Bold" FontSize="Medium" />
                            <Label Text="{Binding Text}" FontSize="Medium" />
                        </StackLayout>
                    </telerik:RadBorder>
                </Grid>
            </DataTemplate>
            <local:CustomChatItemTemplateSelector x:Key="CustomChatItemTemplateSelector"
                                                  ImportantMessageTemplate="{StaticResource ImportantMessageTemplate}" />
        </ResourceDictionary>
        <!-- << chat-features-itemtemplate-resources -->
    </telerik:RadContentView.Resources>
    <!-- >> chat-features-itemtemplate-xaml -->
    <telerik:RadChat x:Name="chat"                                    
                     Author="{Binding Me}"
                     ItemsSource="{Binding Items}" 
                     ItemConverter="{StaticResource SimpleChatItemConverter}"                          
                     ItemTemplateSelector="{StaticResource CustomChatItemTemplateSelector}">
        <telerik:RadChat.BindingContext>
            <local:ViewModel />
        </telerik:RadChat.BindingContext>
    </telerik:RadChat>
    <!-- << chat-features-itemtemplate-xaml -->
</telerik:RadContentView>
